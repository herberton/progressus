<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html 
	xmlns="http://www.w3.org/1999/xhtml"   
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui" 
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:cc = "http://java.sun.com/jsf/composite">
	
	<ui:composition>
		
		<p:commandLink 
			id="lnkRFIDComponent"
			value="#{selection == null ? i18n.select : selection.name}"
			onclick="dlgRFIDComponent.show()"/>
  		
  		<p:dialog 
			widgetVar="dlgRFIDComponent" 
			hideEffect="fade" 
			showEffect="fade">
  			
  			<p:fieldset 
  				id="fdsRFIDComponent" 
  				legend="#{i18n.readerList}">
  				
  				<p:panelGrid 
					columns="3" 
					columnClasses="labelFields, dataFields, dataFields">
  					
  					<h:outputText 
  						value="#{i18n.type}"/>
  					
  					<p:selectOneMenu 
			  			id="selectedClass" 
			  			value="#{comboRFIDReaderType.selectedClass}" 
			  			converter="comboRFIDReaderType">
			  			  
		                <f:selectItem 
		                	itemLabel="#{i18n.select}" 
		                	itemValue="" />  
		                
		                <f:selectItems 
		                	value="#{comboRFIDReaderType.selectItemsClasses}" />
		                
		                <p:ajax 
		                	update="fdsRFIDComponent" 
							listener="#{comboRFIDReaderType.handleReaderChange}" 
							process="@this" />
							 
		            </p:selectOneMenu>
		        	
		        	<p:commandButton 
		        		id="btnClearRFIDComponent" 
		        		value="#{i18n.clear}" 
		        		update="@form" 
		        		process="@this">
		        		
		        		<f:setPropertyActionListener 
		        			target="#{selection}" 
		        			value="" />
		        			
		        		<f:setPropertyActionListener 
		        			target="#{comboRFIDReaderType.selectedClass}" 
		        			value=""/>
		        		
	        		</p:commandButton>
		          
				</p:panelGrid>
				
				<p:spacer 
					height="10" 
					rendered="#{comboRFIDReaderType.selectedClass != null}"/>
				
				<p:dataTable 
						id="rfidReadersTable"
						var="entityType" 
	        			value="#{comboRFIDReaderType.ldm}" 
	        			selection="#{selection}"
	        			rows="5" 
	        			paginator="true"
	        			selectionMode="single" 
	        			emptyMessage="#{i18n.noRecordsFound}"
						rowKey="#{entityType}"
						lazy="true"
						rendered="#{comboRFIDReaderType.selectedClass != null}">
						
						<p:ajax 
							event="rowSelect" 
							update="@form" />
							
		        		<p:column 
		        			headerText="#{i18n.name}">
		            		#{entityType.name}
		           		</p:column>
		           		
		        </p:dataTable>
  			</p:fieldset>
  			
  		</p:dialog>
  		
 	</ui:composition>
 	
</html>